<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Seller Upload</title>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
</head>

<body>
<header>
	Seller Panel
</header>
<div class="container" style="min-height:450px">
	<div class="row">
    	<div class="col-lg-12 pad-0">
            <div class="col-lg-4">
            	<label class="label">Category</label>
                <select name="" id="cat" class="select">
                	<option value="">Select a Category</option>
                	<option value="Men">Men</option>
                    <option value="Women">Women</option>
                    <option value="Kids">Kids</option>
                    <option value="Beauty">Beauty</option>
                </select>
            </div>
            <div class="col-lg-4">
            	<label class="label">Subcategory</label>
                <select name="" class="select" id="subcat" disabled="true">
                <option value="">Select a Subcategory</option>
                </select>
            </div>
            <div class="col-lg-4">
            	<label class="label">Product Type</label>
                <select name="" class="select" id="producttype" disabled="true">
                <option value="">Select a Subcategory</option>
                </select>
            </div>
        </div>
        
        
        <form method="POST" enctype="multipart/form-data" action="http://10.11.19.19:9191/erp/upload" >
        <div id="uploadForm" style="display:none">
                <hr />	

            <div class="col-lg-12 pad-0">
                <div class="col-lg-4">
                    <label class="label">ProductType: </label>
                    <input type="text" name="productType" class="input">	
                </div>
                <div class="col-lg-8">&nbsp;</div>
            </div>		
		<!--ProductType: <input type="text" name="productType"><br /> <br /> 
		VendorCode: <input type="text" name="vendorCode"><br /> <br />-->
            <div class="col-lg-12 ">
                <label for="chkReal">
                    <input type="radio" checked="checked" id="chkReal" name="chkImages" onclick="ShowHideDiv()" />
                        Real
                </label>
                <label for="chkVirtual">
                    <input type="radio" id="chkVirtual" name="chkImages" onclick="ShowHideDiv()" />
                        Virtual
                </label>
            </div>	    
            <div class="col-lg-12 pad-0">
            	<div class="col-lg-4">
                    <div id="vendorURL" style="display: none">
                            <label class="label">URL:</label>
                            <input type="text" class="input" id="txtPassportNumber"  name="url" />
                    </div>
                    <br/>
                    File to upload: <input type="file" name="file"><input type="submit" value="Upload">                
                </div>
                <div class="col-lg-8"></div>
            </div>        
        </div>
        </form>
	</div>
</div>
    

<footer>
	&copy; Exclusively Seller panel 2016
</footer>
<script>
    function ShowHideDiv() {
        var chkVirtual = document.getElementById("chkVirtual");
        var vendorURL = document.getElementById("vendorURL");
        vendorURL.style.display = chkVirtual.checked ? "block" : "none";
    }
</script>

<script type="text/javascript">
$(document).ready(function(){
	
	$("#cat").change(function(){
		var cat = $("#cat").val();
		$.ajax({
            url: 'http://10.11.19.19:9191/erp/getSubcat/'+cat,
            crossDomain: true,
            type: 'GET',
            success: function (data) {
            	var subcat = data["value"]["Subcat"];
            	$("#subcat").empty();
            	$("#subcat").append("<option value=''>Select a Subcategory</option>");
            	for(i=0;i<subcat.length;i++)
            	{
            		
            		$('<option/>').val(subcat[i]).html(subcat[i]).appendTo('#subcat');
            	}
            	$( "#subcat" ).prop( "disabled", false );
            	$( "#producttype" ).prop( "disabled", true );

           	}
        });
	})

	$("#subcat").change(function(){
		var cat = $("#cat").val();
		var subcat = $("#subcat").val();
		$.ajax({
            url: 'http://10.11.19.19:9191/erp/getProductType/'+cat+'/'+subcat,
            crossDomain: true,
            type: 'GET',
            success: function (data) {
            	var pt = data["value"]["PT"];
            	$("#producttype").empty();
            	$("#producttype").append("<option value=''>Select a Product Type</option>");
            	for(i=0;i<pt.length;i++)
            	{
            		$('<option/>').val(pt[i]).html(pt[i]).appendTo('#producttype');
            	}
            	$( "#producttype" ).prop( "disabled", false );

           	}
        });
	})	

	$("#producttype").change(function(){
		var pt = $("#producttype").val();
		$.ajax({
            url: 'http://10.11.19.19:9191/erp/getUploadFormat/'+pt,
            crossDomain: true,
            type: 'GET',
            success: function (data) {
            	var arrCSV= data["value"]["Fields"];
				var csvString = arrCSV.join(",");
				var a         = document.createElement('a');
				a.href        = 'data:attachment/csv,' + csvString;
				a.target      = '_blank';
				a.download    = pt+'.csv';

				document.body.appendChild(a);
				a.click();
				$('#uploadForm').toggle();
           	}
        });
	})

	// $("#fileUpload").click(function(){
	// var pt = $("#producttype").val();
	// var form = document.createElement("form");
 //    form.setAttribute("method", "POST");
 //    form.setAttribute("action","http://10.11.19.19:9191/erp/upload");
 //    form.setAttribute("enctype","multipart/file");
 //    form.setAttribute("productType","Women-Sarees");
 //    form.setAttribute("vendorCode","s0a2b2");
 //    form.setAttribute("url",$("#txtPassportNumber").val())
 //    form.setAttribute("file",$("#file").val());
 //    document.body.appendChild(form);
 //    form.submit();
	// });


	
});
</script>
</body>
</html>


